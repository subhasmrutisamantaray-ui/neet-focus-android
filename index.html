<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NEET Focus</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: black;
    color: white;
    height: 100vh;
  }
  #top-left, #top-right {
    position: fixed;
    top: 10px;
    font-size: 14px;
  }
  #top-left { left: 10px; }
  #top-right { right: 10px; }

  #center {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
  }

  select, button {
    padding: 10px;
    margin: 6px;
    font-size: 16px;
  }

  #timer {
    font-size: 48px;
    margin: 20px 0;
  }

  .break {
    background: #7a0000;
  }
</style>
</head>
<body>

<div id="top-left">NEET in <span id="neet"></span></div>
<div id="top-right">Today: <span id="today">0</span> h</div>

<div id="center">
  <select id="subject">
    <option value="">Choose Subject</option>
    <option>Physics</option>
    <option>Chemistry</option>
    <option>Botany</option>
    <option>Zoology</option>
  </select>

  <select id="mode">
    <option value="lecture">Lecture</option>
    <option value="self">Self Study</option>
  </select>

  <div id="timer">60:00</div>

  <button id="startBtn" onclick="start()">Start</button>
  <button onclick="resetAll()">Reset</button>
</div>

<script>
let focusMin = 60;
let breakMin = 10;
let time = focusMin * 60;
let interval = null;
let phase = "focus";
let subject = "";

const data = JSON.parse(localStorage.getItem("neet") || "{}");

function todayKey(){
  return new Date().toISOString().slice(0,10);
}

if(!data.total) data.total = {};
if(!data.days) data.days = {};
if(!data.days[todayKey()]) data.days[todayKey()] = {};

function save(){
  localStorage.setItem("neet", JSON.stringify(data));
}

function updateNEET(){
  const neetDate = new Date("2026-05-03");
  const now = new Date();
  const diff = Math.ceil((neetDate - now)/(1000*60*60*24));
  document.getElementById("neet").textContent = diff + " days";
}

function fmt(s){
  return String(Math.floor(s/60)).padStart(2,"0") + ":" +
         String(s%60).padStart(2,"0");
}

function start(){
  subject = document.getElementById("subject").value;
  if(!subject){ alert("Choose subject"); return; }

  document.getElementById("startBtn").disabled = true;

  interval = setInterval(()=>{
    time--;
    document.getElementById("timer").textContent = fmt(time);

    if(time <= 0){
      clearInterval(interval);

      if(phase === "focus"){
        if(!data.days[todayKey()][subject])
          data.days[todayKey()][subject] = 0;

        data.days[todayKey()][subject] += focusMin/60;
        data.total[subject] = (data.total[subject] || 0) + focusMin/60;
        save();

        phase = "break";
        document.body.classList.add("break");
        time = breakMin * 60;
      } else {
        phase = "focus";
        document.body.classList.remove("break");
        time = focusMin * 60;
      }
      document.getElementById("startBtn").disabled = false;
      document.getElementById("timer").textContent = fmt(time);
    }
  },1000);
}

function resetAll(){
  clearInterval(interval);
  phase = "focus";
  time = focusMin * 60;
  document.body.classList.remove("break");
  document.getElementById("timer").textContent = fmt(time);
  document.getElementById("startBtn").disabled = false;
}

updateNEET();
</script>

</body>
</html>
